es_host: datana-logs.datana.ru
es_port: 9200
name: Socket Adapter Of Datana Smart
type: frequency
index: datana-smart-dev-logs-*
num_events: 10
timeframe:
  hours: 1
aggregation_key: "@timestamp"
aggregation:
  seconds: 2
filter:
  - query:
      query_string:
        query: "(@timestamp >=: 'now-1s') AND NOT (logger_name: ru.datana.integrationadapter.socket.integration.connector.S7Api AND message: *Получена data из S7Connector и создан МultiSensorModel объект с sensorTemperatureUUID*)"
alert:
  - "telegram"
  -
use_local_time: True

## телеграм для релизов датаны (для примера взято)
##      def final constTelegramReleaseURL = "https://api.telegram.org/bot1171367749:AAFgyOW0LGRLl9NHo9TkZIGNUdd6cFKYGqo/sendMessage?chat_id=-1001451379215&parse_mode=HTML"

telegram_bot_token: 1171367749:AAFgyOW0LGRLl9NHo9TkZIGNUdd6cFKYGqo

telegram_room_id: "@DatanaReleaseEvent"

alert_text: "from elastalert - {0}, {1}, {2}"
alert_text_args: ["type", "username2", "timestamp"]
alert_text_type: alert_text_only